<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>10.3 Assumptions governing TWFEDD estimate | Difference in Differences</title>
  <meta name="description" content="10.3 Assumptions governing TWFEDD estimate | Difference in Differences" />
  <meta name="generator" content="bookdown 0.39 and GitBook 2.6.7" />

  <meta property="og:title" content="10.3 Assumptions governing TWFEDD estimate | Difference in Differences" />
  <meta property="og:type" content="book" />
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="10.3 Assumptions governing TWFEDD estimate | Difference in Differences" />
  
  
  




  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="what-is-twfe-estimating-when-there-is-treatment-timing-variation.html"/>
<link rel="next" href="how-does-treatment-effect-heterogeneity-in-time-affect-twfe.html"/>
<script src="assets/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="assets/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="assets/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="assets/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="assets/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="assets/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="assets/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="assets/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="assets/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="assets/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="assets/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="1" data-path="a-quick-introduction.html"><a href="a-quick-introduction.html"><i class="fa fa-check"></i><b>1</b> A Quick Introduction</a>
<ul>
<li class="chapter" data-level="1.1" data-path="set-up.html"><a href="set-up.html"><i class="fa fa-check"></i><b>1.1</b> Set up</a></li>
<li class="chapter" data-level="1.2" data-path="an-example-evaluating-the-impact-of-medicaid-expansion-on-uninsured-rate.html"><a href="an-example-evaluating-the-impact-of-medicaid-expansion-on-uninsured-rate.html"><i class="fa fa-check"></i><b>1.2</b> An example: Evaluating the impact of Medicaid expansion on uninsured rate</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="naive-estimator.html"><a href="naive-estimator.html"><i class="fa fa-check"></i><b>2</b> Naive estimator</a></li>
<li class="chapter" data-level="3" data-path="canonical-difference-in-differences-framework.html"><a href="canonical-difference-in-differences-framework.html"><i class="fa fa-check"></i><b>3</b> Canonical Difference in Differences Framework</a></li>
<li class="chapter" data-level="4" data-path="did-in-multi-period-set-up.html"><a href="did-in-multi-period-set-up.html"><i class="fa fa-check"></i><b>4</b> DiD in multi-period set up</a></li>
<li class="chapter" data-level="5" data-path="conditional-parallel-trend.html"><a href="conditional-parallel-trend.html"><i class="fa fa-check"></i><b>5</b> Conditional Parallel Trend</a>
<ul>
<li class="chapter" data-level="5.1" data-path="some-concerns-with-controls.html"><a href="some-concerns-with-controls.html"><i class="fa fa-check"></i><b>5.1</b> Some concerns with controls</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="the-2-times-2-difference-in-differences-estimate.html"><a href="the-2-times-2-difference-in-differences-estimate.html"><i class="fa fa-check"></i><b>6</b> The <span class="math inline">\(2 \times 2\)</span> Difference-in-Differences Estimate</a></li>
<li class="chapter" data-level="7" data-path="event-study-model.html"><a href="event-study-model.html"><i class="fa fa-check"></i><b>7</b> Event study model</a></li>
<li class="chapter" data-level="8" data-path="two-way-fixed-effect.html"><a href="two-way-fixed-effect.html"><i class="fa fa-check"></i><b>8</b> Two way fixed effect</a></li>
<li class="chapter" data-level="9" data-path="various-ways-of-estimation.html"><a href="various-ways-of-estimation.html"><i class="fa fa-check"></i><b>9</b> Various ways of estimation</a></li>
<li class="chapter" data-level="10" data-path="multi-period-multi-group-and-variation-in-treatment-timing.html"><a href="multi-period-multi-group-and-variation-in-treatment-timing.html"><i class="fa fa-check"></i><b>10</b> Multi Period, Multi Group and Variation in Treatment Timing</a>
<ul>
<li class="chapter" data-level="10.1" data-path="problem-with-twfe-in-multiple-group-with-treatment-timing-variation.html"><a href="problem-with-twfe-in-multiple-group-with-treatment-timing-variation.html"><i class="fa fa-check"></i><b>10.1</b> Problem with TWFE in Multiple Group with Treatment Timing Variation</a></li>
<li class="chapter" data-level="10.2" data-path="what-is-twfe-estimating-when-there-is-treatment-timing-variation.html"><a href="what-is-twfe-estimating-when-there-is-treatment-timing-variation.html"><i class="fa fa-check"></i><b>10.2</b> What is TWFE Estimating when there is Treatment Timing Variation?</a></li>
<li class="chapter" data-level="10.3" data-path="assumptions-governing-twfedd-estimate.html"><a href="assumptions-governing-twfedd-estimate.html"><i class="fa fa-check"></i><b>10.3</b> Assumptions governing TWFEDD estimate</a></li>
<li class="chapter" data-level="10.4" data-path="how-does-treatment-effect-heterogeneity-in-time-affect-twfe.html"><a href="how-does-treatment-effect-heterogeneity-in-time-affect-twfe.html"><i class="fa fa-check"></i><b>10.4</b> How Does Treatment Effect Heterogeneity in Time Affect TWFE?</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Difference in Differences</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="assumptions-governing-twfedd-estimate" class="section level2 hasAnchor" number="10.3">
<h2><span class="header-section-number">10.3</span> Assumptions governing TWFEDD estimate<a href="assumptions-governing-twfedd-estimate.html#assumptions-governing-twfedd-estimate" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>The TWFEDD estimate measures weighted average of all possible <span class="math inline">\(2 \times 2\)</span> DD average treatment effects on
treated. In the case of groups being defined as treatment timing <span class="math inline">\(k,\;g,\;U\)</span>, the <span class="math inline">\(2\times 2\)</span> DD estimates
can be written as:</p>
<p><span class="math display">\[\begin{equation}
\hat{\alpha}^{2\times 2}_{kU} = [\bar{y}_k^{POST(k)} - \bar{y}_k^{PRE(k)}] - [\bar{y}_U^{POST(k)} - \bar{y}_U^{PRE(k)}]  
\end{equation}\]</span></p>
<p><span class="math display">\[\begin{equation}
\hat{\alpha}^{2\times 2 k}_{kl} = [\bar{y}_k^{MID(k,l)} - \bar{y}_k^{PRE(k)}] - [\bar{y}_l^{MID(k,l)} - \bar{y}_l^{PRE(k)}]  
\end{equation}\]</span></p>
<p><span class="math display">\[\begin{equation}
\hat{\alpha}^{2\times 2 l}_{kl} = [\bar{y}_l^{POST(l)} - \bar{y}_l^{MID(k,l)}] - [\bar{y}_k^{POST(l)} - \bar{y}_k^{MID(k,l)}]  
\end{equation}\]</span></p>
<p>Now, let us express the estimates based on the counterfactuals. First, write</p>
<p><span class="math display">\[\begin{equation}
y_{it} = D_{it}Y_{it}(t_i) + (1-D_{it})Y_{0}
\end{equation}\]</span></p>
<p>where, <span class="math inline">\(Y_{it}\)</span> is the outcome of unit <span class="math inline">\(i\)</span> in time <span class="math inline">\(t\)</span> and <span class="math inline">\(Y_{0}\)</span> is the counterfactual outcome. Following
<span class="citation">(<a href="#ref-callaway2022" role="doc-biblioref"><strong>callaway2022?</strong></a>)</span> define ATT for group <span class="math inline">\(k\)</span> at time period <span class="math inline">\(\tau \geq k\)</span> as <span class="math inline">\(ATT_{k}(\tau) = E[Y_{i\tau}(t^{*}_{k}) - Y_{i\tau}(0)|t_i = k]\)</span>
Now, let us define <span class="math inline">\(W\)</span> as the date range or windows with <span class="math inline">\(T_W\)</span> periods.</p>
<p>In practice, <span class="math inline">\(W\)</span> represents the post treatment
window in <span class="math inline">\(2 \times 2\)</span> DD. But note that there are <span class="math inline">\(T_{W}\)</span> periods. In our case above, <span class="math inline">\(W\)</span> for group <span class="math inline">\(k\)</span> represents
the <span class="math inline">\(MID(k,l)\)</span> plus the <span class="math inline">\(POST(l)\)</span> windows and <span class="math inline">\(T_{W} = 2\)</span>. Group <span class="math inline">\(k\)</span> is treated in two windows – <span class="math inline">\(MID(k,l)\)</span>
and <span class="math inline">\(POST(l)\)</span>; hence, the <span class="math inline">\(ATT_{k}(W)\)</span> is just the average of ATTs across the windows.</p>
<p><span class="math display">\[\begin{equation}
ATT_{k}(W) =  \frac{1}{T_{W}} \sum_{t \in W} E[Y_{it}(k)-Y_{it}(0)|t_{i}=k]
\end{equation}\]</span></p>
<p>Now, define the change in average untreated potential outcome between pre and the post period as:</p>
<p><span class="math display">\[\begin{equation}
\Delta Y_{k}^{0}(W_1, W_0) =  \frac{1}{T_{W_1}} \sum_{t \in W_1} E[Y_{it}(0)|t_{i}=k] - \frac{1}{T_{W_0}} \sum_{t \in W_1} E[Y_{it}(0)|t_{i}=k]
\end{equation}\]</span></p>
<p>Using this notation, the <span class="math inline">\(2 \times 2\)</span> <span class="math inline">\(\hat{\beta}\)</span>s can be written as:</p>
<p><span class="math display">\[\begin{equation}
\hat{\alpha}_k^{2\times 2} = ATT_{k}^{(POST(k))} + \overbrace{[ \Delta Y_{k}^{0}(POST(k),PRE(k)) - \Delta Y_{U}^{0}(POST(k),PRE(k))}^{parallel\;trend}]
\end{equation}\]</span></p>
<p><span class="math display">\[\begin{equation}
\hat{\alpha}_{kl}^{2\times 2 k} = ATT_{k}^{(MID(k,l))} +
\overbrace{[ \Delta Y_{k}^{0}(MID(k,l),PRE(k)) - \Delta Y_{U}^{0}(MID(k,l),PRE(k))}^{parallel\;trend}]
\end{equation}\]</span></p>
<p><span class="math display">\[\begin{equation}
\hat{\alpha}_{kl}^{2\times 2 l} = ATT_{l}^{(MID(k,l))} +
\overbrace{[ \Delta Y_{l}^{0}(POST(l),MID(k,l)) - \Delta Y_{k}^{0}(POST(l),MID(k,l))}^{parallel\;trend}] +
[ATT_k(MID(k,l))-ATT_k(POST(l))]
\end{equation}\]</span></p>
<p>While <span class="math inline">\(\hat{\alpha}_{k}^{2\times 2}\)</span> and <span class="math inline">\(\hat{\alpha}_{k}^{2 \times 2}\)</span> depends on the parallel trend assumption, <span class="math inline">\(\hat{\alpha}_{k}^{2 \times 2}\)</span>
also depends on the difference between group <span class="math inline">\(k&#39;s\)</span> <span class="math inline">\(ATT\)</span> in <span class="math inline">\(MID(k,l)\)</span> and <span class="math inline">\(POST(l)\)</span>. This is because the late treatment group is compared also with
the early treatment group, and if there is presence of treatment dynamic in early treated group, this will show up in <span class="math inline">\(\hat{\alpha}_{kl}^{2\times 2 l}\)</span>. Substituting
the expressions of <span class="math inline">\(\hat{\alpha}_{k}^{2\times 2}\)</span>, <span class="math inline">\(\hat{\alpha}_{k}^{2 \times 2}\)</span>, and <span class="math inline">\(\hat{\alpha}_{kl}^{2\times 2 l}\)</span> into the TWFE decomposition yields the following:</p>
<p><span class="math display">\[\begin{equation}
\plim_{N \to \infty} \hat{\alpha} = \alpha = VWATT + VWCT + \Delta ATT
\end{equation}\]</span></p>
<p>where, VWATT is the variance weighted average treatment effect on the treated; VWCT is the variance weighted common trends; and <span class="math inline">\(\Delta ATT\)</span> is the change in average treatment effect
on treated of group <span class="math inline">\(k\)</span> between the <span class="math inline">\(Mid(k,l)\)</span> and <span class="math inline">\(Posk(l)\)</span> period (treatment effect dynamics or heterogeneity over time).</p>
<p>An intuition is that parallel trend assumption justifies comparing treated vs. untreated (or not yet treated groups), and deviation in pathways of outcome
can be attributed to treatement. As such, <span class="citation">(<a href="#ref-callaway2022" role="doc-biblioref"><strong>callaway2022?</strong></a>)</span> refers to these groups (untreated and not yet treated) as “good comparison” groups. Now, early treatment
group, that serves as the comparison group for the late treated group, can be a “bad comparison” if the treatment effect (of early treated group) varies with time.</p>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="what-is-twfe-estimating-when-there-is-treatment-timing-variation.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="how-does-treatment-effect-heterogeneity-in-time-affect-twfe.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="assets/gitbook-2.6.7/js/app.min.js"></script>
<script src="assets/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="assets/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="assets/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="assets/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="assets/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="assets/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="assets/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": false,
"toc": {
"collapse": "subsection"
},
"toolbar": {
"position": "static"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
